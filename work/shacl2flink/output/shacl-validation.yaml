apiVersion: industry-fusion.com/v1alpha4
kind: BeamSqlStatementSet
metadata:
  name: shacl-validation
spec:
  tables:
  - attributes
  - attributes-insert
  - entities
  - rdf
  - constraint-table
  - constraint-trigger-table
  - alerts-bulk
  - constraint-combination-table
  views:
  - entities-view
  - attributes-view
  sqlsettings:
  - table.exec.sink.upsert-materialize: none
  - execution.savepoint.ignore-unclaimed-state: 'true'
  - pipeline.object-reuse: 'true'
  - parallelism.default: '{{ .Values.flink.defaultParalellism }}'
  - table.exec.source.idle-timeout: '{{ .Values.flink.idleTimeout }}'
  - state.backend: rocksdb
  - state.backend.rocksdb.writebuffer.size: 64 kb
  - state.backend.rocksdb.use-bloom-filter: 'true'
  - state.backend.rocksdb.predefined-options: SPINNING_DISK_OPTIMIZED_HIGH_MEM
  - table.exec.state.ttl: '{{.Values.flink.ttl}}'
  sqlstatementmaps:
  - iff/shacl-validation-configmap1
  updateStrategy: none
